<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Using CloudFront as a Reverse Proxy | anthony lukach</title><meta name=description content="A collection of notes."><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Using CloudFront as a Reverse Proxy"><meta property="og:description" content="Alternate title: How to be master of your domain.
The basic idea of this ticket is to demonstrate how CloudFront can be utilized as a serverless reverse-proxy, allowing you to host all of your application&rsquo;s content and services from a single domain. This minimizes a project&rsquo;s TLD footprint while providing project organization and performance along the way.
Why Within the large organizations, it can be a pain to get a subdomain for a project."><meta property="og:type" content="article"><meta property="og:url" content="http://alukach.com/posts/using_cloudfont_as_a_reverse_proxy/"><meta property="article:published_time" content="2020-10-02T00:00:00+00:00"><meta property="article:modified_time" content="2020-10-02T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Using CloudFront as a Reverse Proxy"><meta name=twitter:description content="Alternate title: How to be master of your domain.
The basic idea of this ticket is to demonstrate how CloudFront can be utilized as a serverless reverse-proxy, allowing you to host all of your application&rsquo;s content and services from a single domain. This minimizes a project&rsquo;s TLD footprint while providing project organization and performance along the way.
Why Within the large organizations, it can be a pain to get a subdomain for a project."><link rel=stylesheet href=http://alukach.com/css/style-white.css><link rel=stylesheet href=http://alukach.com/css/custom.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=http://alukach.com/images/favicon.ico><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-16401510-1','auto');ga('send','pageview');}</script></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a><a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a><a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast');" style=display:none><i class="fas fa-chevron-up fa-lg"></i></a><span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=/posts>Writings</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=http://alukach.com/posts/database_uri_from_secret/><i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li><li><a class=icon href=http://alukach.com/posts/ecr_deployment_script/><i class="fas fa-chevron-right" aria-hidden=true onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li><li><a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast');"><i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li><li><a class=icon href=#><i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=http%3a%2f%2falukach.com%2fposts%2fusing_cloudfont_as_a_reverse_proxy%2f"><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=http%3a%2f%2falukach.com%2fposts%2fusing_cloudfont_as_a_reverse_proxy%2f&text=Using%20CloudFront%20as%20a%20Reverse%20Proxy"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=http%3a%2f%2falukach.com%2fposts%2fusing_cloudfont_as_a_reverse_proxy%2f&title=Using%20CloudFront%20as%20a%20Reverse%20Proxy"><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=http%3a%2f%2falukach.com%2fposts%2fusing_cloudfont_as_a_reverse_proxy%2f&is_video=false&description=Using%20CloudFront%20as%20a%20Reverse%20Proxy"><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Using%20CloudFront%20as%20a%20Reverse%20Proxy&body=Check out this article: http%3a%2f%2falukach.com%2fposts%2fusing_cloudfont_as_a_reverse_proxy%2f"><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=http%3a%2f%2falukach.com%2fposts%2fusing_cloudfont_as_a_reverse_proxy%2f&title=Using%20CloudFront%20as%20a%20Reverse%20Proxy"><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=http%3a%2f%2falukach.com%2fposts%2fusing_cloudfont_as_a_reverse_proxy%2f&title=Using%20CloudFront%20as%20a%20Reverse%20Proxy"><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.stumbleupon.com/submit?url=http%3a%2f%2falukach.com%2fposts%2fusing_cloudfont_as_a_reverse_proxy%2f&title=Using%20CloudFront%20as%20a%20Reverse%20Proxy"><i class="fab fa-stumbleupon" aria-hidden=true></i></a></li><li><a class=icon href="http://digg.com/submit?url=http%3a%2f%2falukach.com%2fposts%2fusing_cloudfont_as_a_reverse_proxy%2f&title=Using%20CloudFront%20as%20a%20Reverse%20Proxy"><i class="fab fa-digg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=http%3a%2f%2falukach.com%2fposts%2fusing_cloudfont_as_a_reverse_proxy%2f&name=Using%20CloudFront%20as%20a%20Reverse%20Proxy&description=Alternate%20title%3a%20How%20to%20be%20master%20of%20your%20domain.%0aThe%20basic%20idea%20of%20this%20ticket%20is%20to%20demonstrate%20how%20CloudFront%20can%20be%20utilized%20as%20a%20serverless%20reverse-proxy%2c%20allowing%20you%20to%20host%20all%20of%20your%20application%26rsquo%3bs%20content%20and%20services%20from%20a%20single%20domain.%20This%20minimizes%20a%20project%26rsquo%3bs%20TLD%20footprint%20while%20providing%20project%20organization%20and%20performance%20along%20the%20way.%0aWhy%20Within%20the%20large%20organizations%2c%20it%20can%20be%20a%20pain%20to%20get%20a%20subdomain%20for%20a%20project."><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=http%3a%2f%2falukach.com%2fposts%2fusing_cloudfont_as_a_reverse_proxy%2f&t=Using%20CloudFront%20as%20a%20Reverse%20Proxy"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><nav id=TableOfContents><ul><li><a href=#why>Why</a></li><li><a href=#how-it-works>How it works</a><ul><li><a href=#single-page-applications>Single Page Applications</a></li><li><a href=#apis>APIs</a></li><li><a href=#data-from-s3-buckets>Data from S3 Buckets</a></li></ul></li><li><a href=#caveats>Caveats</a></li><li><a href=#summary>Summary</a></li><li><a href=#example>Example</a></li><li><a href=#additional-reading>Additional reading</a></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Using CloudFront as a Reverse Proxy</h1><div class=meta><div class=postdate><time datetime="2020-10-02 00:00:00 +0000 UTC" itemprop=datePublished>2020-10-02</time></div><div class=article-tag><i class="fas fa-tag"></i><a class=tag-link href=/tags/python rel=tag>python</a>
,
<a class=tag-link href=/tags/aws rel=tag>aws</a>
,
<a class=tag-link href=/tags/cdk rel=tag>cdk</a>
,
<a class=tag-link href=/tags/cloudfront rel=tag>cloudfront</a></div></div></header><div class=content itemprop=articleBody><p><em>Alternate title: How to be master of your domain.</em></p><p>The basic idea of this ticket is to demonstrate how CloudFront can be utilized as a serverless <a href=https://www.cloudflare.com/learning/cdn/glossary/reverse-proxy/>reverse-proxy</a>, allowing you to host all of your application&rsquo;s content and services from a single domain. This minimizes a project&rsquo;s <a href=https://en.wikipedia.org/wiki/Top-level_domain>TLD</a> footprint while providing project organization and performance along the way.</p><h2 id=why>Why</h2><p>Within the large organizations, it can be a pain to get a subdomain for a project. At times, we won’t want to have to deal with the process to spin up service-specific subdomains (e.g. <code>api.my-project.big-institution.gov</code> or <code>thumbnails.my-project.big-institution.gov</code>). As a result, we&rsquo;ve settled on adopting a pattern where we use CloudFront to proxy all of our domain&rsquo;s incoming requests to their appropriate service.</p><h2 id=how-it-works>How it works</h2><p>CloudFront has the ability to support multiple origin configurations. We can utilize the <a href=https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/distribution-web-values-specify.html#DownloadDistValuesPathPattern>Path Pattern</a> setting to direct web requests by URL path to their appropriate service. CloudFront behaves like a typical router libraries, wherein it routes traffic to the first path with a pattern matching the incoming request and routes requests that don&rsquo;t match route patterns to a default route. For example, our current infrastructure looks like this:</p><pre><code>my-project.big-institution.gov/
├── api/*         &lt;- Application Load Balancer (ALB) that distributes traffic to order
│                    management API service running on Elastic Container Service (ECS).
├── stac/*        &lt;- ALB that distributes traffic to STAC API service running on ECS.
│
├── storage/*     &lt;- Private S3 bucket storing private data. Only URLs that have been
│                    signed with our CloudFront keypair will be successful.
├── thumbnails/*  &lt;- Public S3 bucket storing thumbnail imagery.
│
└── *             &lt;- Public S3 website bucket storing our single page application frontend.
</code></pre><h3 id=single-page-applications>Single Page Applications</h3><p>An S3 bucket configured for <a href=https://docs.aws.amazon.com/AmazonS3/latest/dev/WebsiteHosting.html>website hosting</a> acts as the origin for our default route. If an incoming request&rsquo;s path does not match routes specified elsewhere within the CloudFront distribution, it is routed to the single page application. To configure the single page application to handle any requests provided (i.e. not just requests sent to paths of existing files within the bucket, such as <code>index.html</code> or <code>app.js</code>), the bucket should be configured with a <a href=https://docs.aws.amazon.com/AmazonS3/latest/dev/CustomErrorDocSupport.html>custom error page</a> in response to <code>404</code> errors, returning the applications HTML entrypoint (<code>index.html</code>).</p><h4 id=requirements>Requirements</h4><p>To enable the usage of a custom error page, the S3 bucket&rsquo;s website endpoint (i.e. <code>&lt;bucket-name>.s3-website-&lt;region>.amazonaws.com</code>, not <code>&lt;bucket-name>.s3.&lt;region>.amazonaws.com</code>) must be configured as a custom origin for the distribution. Additionally, the bucket must be configured for public access. More information: <a href=https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/DownloadDistS3AndCustomOrigins.html#concept_S3Origin_website>Using Amazon S3 Buckets Configured as Website Endpoints for Your Origin</a>. Being that the S3 website endpoint does not support SSL, the custom origin&rsquo;s <a href=https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/distribution-web-values-specify.html#DownloadDistValuesOriginProtocolPolicy>Protocol Policy</a> should be set to HTTP Only.</p><blockquote><p>My bucket is private. Can CloudFront serve a website from this bucket?</p></blockquote><p>If your bucket is private, the website endpoint will not work (<a href=https://aws.amazon.com/premiumsupport/knowledge-center/s3-cloudfront-website-access/>source</a>). You could configure CloudFront to send traffic to the buckets REST API endpoint, however this will prevent you from being able to utilize S3&rsquo;s custom error document feature which is essential for hosting single page applications on S3.</p><blockquote><p>CloudFront itself has support for custom error pages. Why can&rsquo;t I use that to enable hosting private S3 buckets as websites?</p></blockquote><p>While it is true that CloudFront can route error responses to custom pages (e.g. sending all <code>404</code> responses the contents of <code>s3://my-website-bucket/index.html</code>), these custom error pages apply to the entirety of your CloudFront distribution. This is likely undesirable for any API services hosted by your CloudFront distribution. For example, if a user accesses a RESTful API at <code>http://my-website.com/api/notes/12345</code> and the API server responds with a <code>404</code> of <code>{"details": "Record not found"}</code>, the response body will be re-written to contain the contents of <code>s3://my-website-bucket/index.html</code>. <em>At time of writing, I am unaware of any capability of applying custom error pages to only certain content-types. A feature such as this might make distribution-wide custom error pages a viable solution.</em></p><h3 id=apis>APIs</h3><p>APIs are served as custom origins, with their <a href=https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/distribution-web-values-specify.html#DownloadDistValuesDomainName>Domain Name</a> settings pointing to their an ALB&rsquo;s DNS name.</p><blockquote><p>Does this work with APIs run with Lambda or EC2?</p></blockquote><p>Assuming that the service has a DNS name, it can be set up as an origin for CloudFront. This means that for an endpoint handled by a Lambda function, you would need to have it served behind an API Gateway or an ALB.</p><h4 id=recommended-configuration>Recommended configuration</h4><ul><li><a href=https://aws.amazon.com/premiumsupport/knowledge-center/prevent-cloudfront-from-caching-files/>Disable caching</a> by setting the default, minimum, and maximum TTL to <code>0</code> seconds.</li><li>Set <a href=https://docs.aws.amazon.com/cloudfront/latest/APIReference/API_AllowedMethods.html>AllowedMethods</a> to forward all requests (i.e. <code>GET</code>, <code>HEAD</code>, <code>OPTIONS</code>, <code>PUT</code>, <code>PATCH</code>, <code>POST</code>, and <code>DELETE</code>).</li><li>Set <a href=https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cloudfront-distribution-forwardedvalues.html>ForwardedValues</a> so that querystring and the following headers are fowarded: <code>referer</code>, <code>authorization</code>, <code>origin</code>, <code>accept</code>, <code>host</code></li><li><a href=https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/distribution-web-values-specify.html#DownloadDistValuesOriginProtocolPolicy>Origin Protocol Policy</a> of HTTP Only.</li></ul><h3 id=data-from-s3-buckets>Data from S3 Buckets</h3><p>Data from a standard S3 bucket can be configured by pointing to the bucket&rsquo;s REST endpoint (e.g. <code>&lt;bucket-name>.s3.&lt;region>.amazonaws.com</code>). More information: <a href=https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/DownloadDistS3AndCustomOrigins.html>Using Amazon S3 Buckets for Your Origin</a>.</p><p>This can be a public bucket, in which case would benefit from the CDN and caching provided by CloudFront.</p><p>When using a private bucket, CloudFront additionally can serve as a &ldquo;trusted signer&rdquo; to enable an application with access to the CloudFront security keys to create signed URLs/cookies to grant temporary access to particular private content. In order for CloudFront to access content within a private bucket, its Origin Access Identity must be given read privileges within the bucket&rsquo;s policy. More information: <a href=https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/private-content-restricting-access-to-s3.html>Restricting Access to Amazon S3 Content by Using an Origin Access Identity</a></p><h2 id=caveats>Caveats</h2><p>The most substantial issue with this technique is the fact that CloudFront does not have the capability to remove portions of a path from a request&rsquo;s URL. For example, if an API is configured as an origin at <code>https://d1234abcde.cloudfront.net/api</code>, it should be configured to respond to URLs starting with <code>/api</code>. This is often a non-issue, as many server frameworks have builtin support to support being hosted at a non-root path.</p><details><summary>Configuring FastAPI to be served under a non-root path</summary><div class=highlight><div style=color:#4d4d4d;background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#4d4d4d;background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#4d4d4d;background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-py data-lang=py><span style=color:#2c5dcd;font-weight:700>from</span> fastapi <span style=color:#2c5dcd;font-weight:700>import</span> FastAPI, APIRouter

API_BASE_PATH <span style=color:#2c5dcd>=</span> <span style=color:#0c6>&#39;/api&#39;</span>

app <span style=color:#2c5dcd>=</span> FastAPI(
    title<span style=color:#2c5dcd>=</span><span style=color:#0c6>&#34;Example API&#34;</span>,
    docs_url<span style=color:#2c5dcd>=</span>API_BASE_PATH,
    swagger_ui_oauth2_redirect_url<span style=color:#2c5dcd>=</span>f<span style=color:#0c6>&#34;{API_BASE_PATH}/oauth2-redirect&#34;</span>,
    openapi_url<span style=color:#2c5dcd>=</span>f<span style=color:#0c6>&#34;{API_BASE_PATH}/openapi.json&#34;</span>,
)
api_router <span style=color:#2c5dcd>=</span> APIRouter()
app<span style=color:#2c5dcd>.</span>include_router(router, prefix<span style=color:#2c5dcd>=</span>API_BASE_PATH)
</code></pre></td></tr></table></div></div></details><p>Furthermore, if you have an S3 bucket serving content from <code>https://d1234abcde.cloudfront.net/bucket</code>, only keys that with a prefix of <code>bucket/</code> will be available to that origin. In the event that keys are not prefixed with a path matching the origins configured path pattern, there are two options:</p><ol><li>Move all of the files, likely utilizing something like S3 Batch (see #253 for more details)</li><li>Use a Lambda@Edge function to rewrite the path of any incoming request for a non-cached resource to conform to the key structure of the S3 bucket&rsquo;s objects.</li></ol><h2 id=summary>Summary</h2><p>After learning this technique, it feels kind of obvious. I&rsquo;m honestly not sure if this is AWS 101 level technique or something that is rarely done; however I never knew of it before this project and therefore felt it was worth sharing.</p><p>A quick summary of some of the advantages that come with using CloudFront for all application endpoints:</p><ul><li>It feels generally tidier to have all your endpoints placed behind a single domain. No more dealing with ugly ALB, API Gateway, or S3 URLs. This additionally pays off when you are dealing with multiple stages (e.g. <code>prod</code> and <code>dev</code>) of the same service 🧹.</li><li>SSL is managed and terminated at CloudFront. Everything after that is port 80 non-SSL traffic, simplifying the management of certificates 🔒.</li><li>All non-SSL traffic can be set to auto-redirect to SSL endpoints ↩️.</li><li>Out of the box, AWS Shield Standard is applied to CloudFront to provide protection against DDoS attacks 🏰.</li><li>Static content is regionally cached and served from <a href=https://aws.amazon.com/cloudfront/features/#Amazon_CloudFront_Infrastructure>Edge Locations</a> closer to the viewer 🌏.</li><li>Dynamic content is also served from Edge Locations, which connect to the origin server via AWS' global private network. This is faster than connecting to an origin server over the public internet 🚀.</li><li>All data is served from the same domain origin. Goodbye CORS errors 👋!</li><li>Data egress costs are lower through CloudFront than other services. This can be ensured by only selecting <a href=https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/PriceClass.html>Price Class 100</a>, other price classes can be chosen if enabling a global CDN is worth the higher egress costs 💴.</li></ul><h2 id=example>Example</h2><details><summary>An example of a reverse-proxy CloudFront Distribution written with CDK in Python</summary><div class=highlight><div style=color:#4d4d4d;background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#4d4d4d;background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 26
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 27
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 28
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 29
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 30
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 31
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 32
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 33
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 34
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 35
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 36
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 37
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 38
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 39
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 40
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 41
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 42
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 43
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 44
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 45
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 46
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 47
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 48
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 49
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 50
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 51
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 52
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 53
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 54
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 55
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 56
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 57
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 58
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 59
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 60
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 61
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 62
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 63
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 64
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 65
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 66
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 67
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 68
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 69
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 70
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 71
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 72
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 73
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 74
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 75
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 76
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 77
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 78
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 79
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 80
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 81
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 82
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 83
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 84
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 85
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 86
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 87
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 88
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 89
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 90
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 91
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 92
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 93
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 94
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 95
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 96
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 97
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 98
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 99
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">100
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">101
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">102
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">103
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">104
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">105
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">106
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">107
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">108
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">109
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">110
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">111
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">112
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">113
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">114
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">115
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">116
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">117
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">118
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">119
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">120
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">121
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">122
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">123
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">124
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">125
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#4d4d4d;background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-py data-lang=py><span style=color:#2c5dcd;font-weight:700>from</span> aws_cdk <span style=color:#2c5dcd;font-weight:700>import</span> (
    aws_s3 <span style=color:#2c5dcd;font-weight:700>as</span> s3,
    aws_certificatemanager <span style=color:#2c5dcd;font-weight:700>as</span> certmgr,
    aws_iam <span style=color:#2c5dcd;font-weight:700>as</span> iam,
    aws_cloudfront <span style=color:#2c5dcd;font-weight:700>as</span> cf,
    aws_elasticloadbalancingv2 <span style=color:#2c5dcd;font-weight:700>as</span> elbv2,
    core,
)


<span style=color:#2c5dcd;font-weight:700>class</span> <span style=text-decoration:underline>CloudfrontDistribution</span>(core<span style=color:#2c5dcd>.</span>Construct):
    <span style=color:#2c5dcd;font-weight:700>def</span> __init__(
        self,
        scope: core<span style=color:#2c5dcd>.</span>Construct,
        <span style=color:#5918bb;font-weight:700>id</span>: <span style=color:#5918bb;font-weight:700>str</span>,
        api_lb: elbv2<span style=color:#2c5dcd>.</span>ApplicationLoadBalancer,
        assets_bucket: s3<span style=color:#2c5dcd>.</span>Bucket,
        website_bucket: s3<span style=color:#2c5dcd>.</span>Bucket,
        domain_name: <span style=color:#5918bb;font-weight:700>str</span> <span style=color:#2c5dcd>=</span> None,
        using_gcc_acct: <span style=color:#5918bb;font-weight:700>bool</span> <span style=color:#2c5dcd>=</span> False,
        <span style=color:#2c5dcd>**</span>kwargs,
    ) <span style=color:#2c5dcd>-&gt;</span> None:
        <span style=color:#5918bb;font-weight:700>super</span>()<span style=color:#2c5dcd>.</span>__init__(scope, <span style=color:#5918bb;font-weight:700>id</span>, <span style=color:#2c5dcd>**</span>kwargs)

        oai <span style=color:#2c5dcd>=</span> cf<span style=color:#2c5dcd>.</span>OriginAccessIdentity(
            self, <span style=color:#0c6>&#34;Identity&#34;</span>, comment<span style=color:#2c5dcd>=</span><span style=color:#0c6>&#34;Allow CloudFront to access S3 Bucket&#34;</span>,
        )
        <span style=color:#2c5dcd;font-weight:700>if</span> <span style=color:#2c5dcd;font-weight:700>not</span> using_gcc_acct:
            self<span style=color:#2c5dcd>.</span>grant_oai_read(oai, assets_bucket)

        certificate <span style=color:#2c5dcd>=</span> (
            certmgr<span style=color:#2c5dcd>.</span>Certificate(self, <span style=color:#0c6>&#34;Certificate&#34;</span>, domain_name<span style=color:#2c5dcd>=</span>domain_name)
            <span style=color:#2c5dcd;font-weight:700>if</span> domain_name
            <span style=color:#2c5dcd;font-weight:700>else</span> None
        )

        self<span style=color:#2c5dcd>.</span>distribution <span style=color:#2c5dcd>=</span> cf<span style=color:#2c5dcd>.</span>CloudFrontWebDistribution(
            self,
            core<span style=color:#2c5dcd>.</span>Stack<span style=color:#2c5dcd>.</span>of(self)<span style=color:#2c5dcd>.</span>stack_name,
            alias_configuration<span style=color:#2c5dcd>=</span>(
                cf<span style=color:#2c5dcd>.</span>AliasConfiguration(
                    acm_cert_ref<span style=color:#2c5dcd>=</span>certificate<span style=color:#2c5dcd>.</span>certificate_arn, names<span style=color:#2c5dcd>=</span>[domain_name]
                )
                <span style=color:#2c5dcd;font-weight:700>if</span> certificate
                <span style=color:#2c5dcd;font-weight:700>else</span> None
            ),
            comment<span style=color:#2c5dcd>=</span>core<span style=color:#2c5dcd>.</span>Stack<span style=color:#2c5dcd>.</span>of(self)<span style=color:#2c5dcd>.</span>stack_name,
            origin_configs<span style=color:#2c5dcd>=</span>[
                <span style=color:#0080ff;font-style:italic># Frontend Website</span>
                cf<span style=color:#2c5dcd>.</span>SourceConfiguration(
                    <span style=color:#0080ff;font-style:italic># NOTE: Can&#39;t use S3OriginConfig because we want to treat our</span>
                    <span style=color:#0080ff;font-style:italic># bucket as an S3 Website Endpoint rather than an S3 REST API</span>
                    <span style=color:#0080ff;font-style:italic># Endpoint. This allows us to use a custom error document to</span>
                    <span style=color:#0080ff;font-style:italic># direct all requests to a single HTML document (as required</span>
                    <span style=color:#0080ff;font-style:italic># to host an SPA).</span>
                    custom_origin_source<span style=color:#2c5dcd>=</span>cf<span style=color:#2c5dcd>.</span>CustomOriginConfig(
                        domain_name<span style=color:#2c5dcd>=</span>website_bucket<span style=color:#2c5dcd>.</span>bucket_website_domain_name,
                        origin_protocol_policy<span style=color:#2c5dcd>=</span>cf<span style=color:#2c5dcd>.</span>OriginProtocolPolicy<span style=color:#2c5dcd>.</span>HTTP_ONLY,  <span style=color:#0080ff;font-style:italic># In website-mode, S3 only serves HTTP # noqa: E501</span>
                    ),
                    behaviors<span style=color:#2c5dcd>=</span>[cf<span style=color:#2c5dcd>.</span>Behavior(is_default_behavior<span style=color:#2c5dcd>=</span>True)],
                ),
                <span style=color:#0080ff;font-style:italic># API load balancer</span>
                cf<span style=color:#2c5dcd>.</span>SourceConfiguration(
                    custom_origin_source<span style=color:#2c5dcd>=</span>cf<span style=color:#2c5dcd>.</span>CustomOriginConfig(
                        domain_name<span style=color:#2c5dcd>=</span>api_lb<span style=color:#2c5dcd>.</span>load_balancer_dns_name,
                        origin_protocol_policy<span style=color:#2c5dcd>=</span>cf<span style=color:#2c5dcd>.</span>OriginProtocolPolicy<span style=color:#2c5dcd>.</span>HTTP_ONLY,
                    ),
                    behaviors<span style=color:#2c5dcd>=</span>[
                        cf<span style=color:#2c5dcd>.</span>Behavior(
                            path_pattern<span style=color:#2c5dcd>=</span><span style=color:#0c6>&#34;/api*&#34;</span>,  <span style=color:#0080ff;font-style:italic># No trailing slash to permit access to root path of API # noqa: E501</span>
                            allowed_methods<span style=color:#2c5dcd>=</span>cf<span style=color:#2c5dcd>.</span>CloudFrontAllowedMethods<span style=color:#2c5dcd>.</span>ALL,
                            forwarded_values<span style=color:#2c5dcd>=</span>{
                                <span style=color:#0c6>&#34;query_string&#34;</span>: True,
                                <span style=color:#0c6>&#34;headers&#34;</span>: [
                                    <span style=color:#0c6>&#34;referer&#34;</span>,
                                    <span style=color:#0c6>&#34;authorization&#34;</span>,
                                    <span style=color:#0c6>&#34;origin&#34;</span>,
                                    <span style=color:#0c6>&#34;accept&#34;</span>,
                                    <span style=color:#0c6>&#34;host&#34;</span>,  <span style=color:#0080ff;font-style:italic># Required to prevent API&#39;s redirects on trailing slashes directing users to ALB endpoint # noqa: E501</span>
                                ],
                            },
                            <span style=color:#0080ff;font-style:italic># Disable caching</span>
                            default_ttl<span style=color:#2c5dcd>=</span>core<span style=color:#2c5dcd>.</span>Duration<span style=color:#2c5dcd>.</span>seconds(<span style=color:#5918bb;font-weight:700>0</span>),
                            min_ttl<span style=color:#2c5dcd>=</span>core<span style=color:#2c5dcd>.</span>Duration<span style=color:#2c5dcd>.</span>seconds(<span style=color:#5918bb;font-weight:700>0</span>),
                            max_ttl<span style=color:#2c5dcd>=</span>core<span style=color:#2c5dcd>.</span>Duration<span style=color:#2c5dcd>.</span>seconds(<span style=color:#5918bb;font-weight:700>0</span>),
                        )
                    ],
                ),
                <span style=color:#0080ff;font-style:italic># Assets</span>
                cf<span style=color:#2c5dcd>.</span>SourceConfiguration(
                    s3_origin_source<span style=color:#2c5dcd>=</span>cf<span style=color:#2c5dcd>.</span>S3OriginConfig(
                        s3_bucket_source<span style=color:#2c5dcd>=</span>assets_bucket, origin_access_identity<span style=color:#2c5dcd>=</span>oai,
                    ),
                    behaviors<span style=color:#2c5dcd>=</span>[
                        cf<span style=color:#2c5dcd>.</span>Behavior(
                            path_pattern<span style=color:#2c5dcd>=</span><span style=color:#0c6>&#34;/storage/*&#34;</span>, trusted_signers<span style=color:#2c5dcd>=</span>[<span style=color:#0c6>&#34;self&#34;</span>],
                        )
                    ],
                ),
            ],
        )
        self<span style=color:#2c5dcd>.</span>assets_path <span style=color:#2c5dcd>=</span> f<span style=color:#0c6>&#34;https://{self.distribution.domain_name}/storage&#34;</span>
        core<span style=color:#2c5dcd>.</span>CfnOutput(self, <span style=color:#0c6>&#34;Endpoint&#34;</span>, value<span style=color:#2c5dcd>=</span>self<span style=color:#2c5dcd>.</span>distribution<span style=color:#2c5dcd>.</span>domain_name)

    <span style=color:#2c5dcd;font-weight:700>def</span> <span style=color:#ff8000;font-weight:700>grant_oai_read</span>(self, oai: cf<span style=color:#2c5dcd>.</span>OriginAccessIdentity, bucket: s3<span style=color:#2c5dcd>.</span>Bucket):
        <span style=color:#0c6>&#34;&#34;&#34;
</span><span style=color:#0c6>        To grant read access to our OAI, at time of writing we can not simply use
</span><span style=color:#0c6>        `bucket.grant_read(oai)`. This is due to the fact that we are looking up
</span><span style=color:#0c6>        our bucket by its name. For more information, see the following:
</span><span style=color:#0c6>        https://stackoverflow.com/a/60917015/728583.
</span><span style=color:#0c6>
</span><span style=color:#0c6>        As a work-around, we can manually assigned a policy statement, however
</span><span style=color:#0c6>        this does not work in situations where a policy is already applied to
</span><span style=color:#0c6>        the bucket (e.g. in GCC environments).
</span><span style=color:#0c6>        &#34;&#34;&#34;</span>
        policy_statement <span style=color:#2c5dcd>=</span> iam<span style=color:#2c5dcd>.</span>PolicyStatement(
            actions<span style=color:#2c5dcd>=</span>[<span style=color:#0c6>&#34;s3:GetObject*&#34;</span>, <span style=color:#0c6>&#34;s3:List*&#34;</span>],
            resources<span style=color:#2c5dcd>=</span>[bucket<span style=color:#2c5dcd>.</span>bucket_arn, f<span style=color:#0c6>&#34;{bucket.bucket_arn}/storage*&#34;</span>],
            principals<span style=color:#2c5dcd>=</span>[],
        )
        policy_statement<span style=color:#2c5dcd>.</span>add_canonical_user_principal(
            oai<span style=color:#2c5dcd>.</span>cloud_front_origin_access_identity_s3_canonical_user_id
        )
        assets_policy <span style=color:#2c5dcd>=</span> s3<span style=color:#2c5dcd>.</span>BucketPolicy(self, <span style=color:#0c6>&#34;AssetsPolicy&#34;</span>, bucket<span style=color:#2c5dcd>=</span>bucket)
        assets_policy<span style=color:#2c5dcd>.</span>document<span style=color:#2c5dcd>.</span>add_statements(policy_statement)
</code></pre></td></tr></table></div></div></details><h2 id=additional-reading>Additional reading</h2><ul><li><a href=https://aws.amazon.com/blogs/networking-and-content-delivery/amazon-s3-amazon-cloudfront-a-match-made-in-the-cloud/>Amazon S3 + Amazon CloudFront: A Match Made in the Cloud</a></li><li><a href=https://aws.amazon.com/blogs/networking-and-content-delivery/dynamic-whole-site-delivery-with-amazon-cloudfront/>Dynamic Whole Site Delivery with Amazon CloudFront</a></li></ul></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=/posts>Writings</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#why>Why</a></li><li><a href=#how-it-works>How it works</a><ul><li><a href=#single-page-applications>Single Page Applications</a></li><li><a href=#apis>APIs</a></li><li><a href=#data-from-s3-buckets>Data from S3 Buckets</a></li></ul></li><li><a href=#caveats>Caveats</a></li><li><a href=#summary>Summary</a></li><li><a href=#example>Example</a></li><li><a href=#additional-reading>Additional reading</a></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=http%3a%2f%2falukach.com%2fposts%2fusing_cloudfont_as_a_reverse_proxy%2f"><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=http%3a%2f%2falukach.com%2fposts%2fusing_cloudfont_as_a_reverse_proxy%2f&text=Using%20CloudFront%20as%20a%20Reverse%20Proxy"><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=http%3a%2f%2falukach.com%2fposts%2fusing_cloudfont_as_a_reverse_proxy%2f&title=Using%20CloudFront%20as%20a%20Reverse%20Proxy"><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=http%3a%2f%2falukach.com%2fposts%2fusing_cloudfont_as_a_reverse_proxy%2f&is_video=false&description=Using%20CloudFront%20as%20a%20Reverse%20Proxy"><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Using%20CloudFront%20as%20a%20Reverse%20Proxy&body=Check out this article: http%3a%2f%2falukach.com%2fposts%2fusing_cloudfont_as_a_reverse_proxy%2f"><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=http%3a%2f%2falukach.com%2fposts%2fusing_cloudfont_as_a_reverse_proxy%2f&title=Using%20CloudFront%20as%20a%20Reverse%20Proxy"><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=http%3a%2f%2falukach.com%2fposts%2fusing_cloudfont_as_a_reverse_proxy%2f&title=Using%20CloudFront%20as%20a%20Reverse%20Proxy"><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.stumbleupon.com/submit?url=http%3a%2f%2falukach.com%2fposts%2fusing_cloudfont_as_a_reverse_proxy%2f&title=Using%20CloudFront%20as%20a%20Reverse%20Proxy"><i class="fab fa-stumbleupon fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://digg.com/submit?url=http%3a%2f%2falukach.com%2fposts%2fusing_cloudfont_as_a_reverse_proxy%2f&title=Using%20CloudFront%20as%20a%20Reverse%20Proxy"><i class="fab fa-digg fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=http%3a%2f%2falukach.com%2fposts%2fusing_cloudfont_as_a_reverse_proxy%2f&name=Using%20CloudFront%20as%20a%20Reverse%20Proxy&description=Alternate%20title%3a%20How%20to%20be%20master%20of%20your%20domain.%0aThe%20basic%20idea%20of%20this%20ticket%20is%20to%20demonstrate%20how%20CloudFront%20can%20be%20utilized%20as%20a%20serverless%20reverse-proxy%2c%20allowing%20you%20to%20host%20all%20of%20your%20application%26rsquo%3bs%20content%20and%20services%20from%20a%20single%20domain.%20This%20minimizes%20a%20project%26rsquo%3bs%20TLD%20footprint%20while%20providing%20project%20organization%20and%20performance%20along%20the%20way.%0aWhy%20Within%20the%20large%20organizations%2c%20it%20can%20be%20a%20pain%20to%20get%20a%20subdomain%20for%20a%20project."><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=http%3a%2f%2falukach.com%2fposts%2fusing_cloudfont_as_a_reverse_proxy%2f&t=Using%20CloudFront%20as%20a%20Reverse%20Proxy"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu class=icon href=# onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden=true></i>Menu</a>
<a id=toc class=icon href=# onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden=true></i>TOC</a>
<a id=share class=icon href=# onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden=true></i>share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i>Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2021 Anthony Lukach</div><div class=footer-right><nav><ul><li><a href=/>Home</a></li><li><a href=/posts>Writings</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script><script src=/js/main.js></script></html>