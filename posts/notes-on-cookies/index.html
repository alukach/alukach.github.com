<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Everything that I know about Cookies üç™ | anthony lukach</title><meta name=keywords content="cookies"><meta name=description content="This is everything that I know about using cookies in web applications. Admittedly, I don&rsquo;t know a lot about cookies and should probably not be considered a source of authority on this topic. These are just notes I write while trying to learn about the subject.
Why cookies? Making authenticated anchor tags Can&rsquo;t specify headers with <a> tags.
Could supply token as query parameter, but that&rsquo;s a security concern due to potential of token being cached with URL."><meta name=author content><link rel=canonical href=https://alukach.com/posts/notes-on-cookies/><link crossorigin=anonymous href=/assets/css/stylesheet.min.4ba82eb0954ce20ea51d7ca6c3b71ea48dd719c880f27386be309802fedc6b21.css integrity="sha256-S6gusJVM4g6lHXymw7cepI3XGciA8nOGvjCYAv7cayE=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://alukach.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://alukach.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://alukach.com/favicon-32x32.png><link rel=apple-touch-icon href=https://alukach.com/apple-touch-icon.png><link rel=mask-icon href=https://alukach.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-16401510-1","auto"),ga("send","pageview"))</script><meta property="og:title" content="Everything that I know about Cookies üç™"><meta property="og:description" content="This is everything that I know about using cookies in web applications. Admittedly, I don&rsquo;t know a lot about cookies and should probably not be considered a source of authority on this topic. These are just notes I write while trying to learn about the subject.
Why cookies? Making authenticated anchor tags Can&rsquo;t specify headers with <a> tags.
Could supply token as query parameter, but that&rsquo;s a security concern due to potential of token being cached with URL."><meta property="og:type" content="article"><meta property="og:url" content="https://alukach.com/posts/notes-on-cookies/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-04-01T00:00:00+00:00"><meta property="article:modified_time" content="2023-04-01T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Everything that I know about Cookies üç™"><meta name=twitter:description content="This is everything that I know about using cookies in web applications. Admittedly, I don&rsquo;t know a lot about cookies and should probably not be considered a source of authority on this topic. These are just notes I write while trying to learn about the subject.
Why cookies? Making authenticated anchor tags Can&rsquo;t specify headers with <a> tags.
Could supply token as query parameter, but that&rsquo;s a security concern due to potential of token being cached with URL."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://alukach.com/posts/"},{"@type":"ListItem","position":2,"name":"Everything that I know about Cookies üç™","item":"https://alukach.com/posts/notes-on-cookies/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Everything that I know about Cookies üç™","name":"Everything that I know about Cookies üç™","description":"This is everything that I know about using cookies in web applications. Admittedly, I don\u0026rsquo;t know a lot about cookies and should probably not be considered a source of authority on this topic. These are just notes I write while trying to learn about the subject.\nWhy cookies? Making authenticated anchor tags Can\u0026rsquo;t specify headers with \u0026lt;a\u0026gt; tags.\nCould supply token as query parameter, but that\u0026rsquo;s a security concern due to potential of token being cached with URL.","keywords":["cookies"],"articleBody":"This is everything that I know about using cookies in web applications. Admittedly, I don‚Äôt know a lot about cookies and should probably not be considered a source of authority on this topic. These are just notes I write while trying to learn about the subject.\nWhy cookies? Making authenticated anchor tags Can‚Äôt specify headers with tags.\nCould supply token as query parameter, but that‚Äôs a security concern due to potential of token being cached with URL.\nNo need to manage JWTs within your application Things that are annoying about JWTs when building frontend applications:\nYou need to choose where to store the JWTs You need to supply the JWT to any code making API requests How cookies? Cookies are typically set by backend code after a user successfully logs in. They are typically signed to verify their authenticity. Often, they simply point to an identifier that tracks a user‚Äôs ‚Äúsession‚Äù within some stateful service (ie database).\nHow to do cross-origin cookies Backend must set the access-control-allow-credentials header to instruct browsers that it‚Äôs okay to pass credentials when making requests (docs). Backend must specify the access-control-allow-origin header to instruct browsers which origins are allowed to access the API. Note that you can‚Äôt use * when passing credentials between origins (docs). Backend will need to specify that our cookies have samesite=none if attempting to send cookie to other sites. Note that Same-Site is not the same as Same-Origin, a cookie set with samesite=strict will still be passed between hosts at different subdomains or ports of a domain (docs). Also note that Secure must also be set when samesite=none (docs). Backend must skip auth checks on preflight requests, as browsers don‚Äôt send cookies on OPTIONS requests (docs) Frontend needs to provide credentials with requests. 1 await fetch(url, { credentials: true }); ","wordCount":"300","inLanguage":"en","datePublished":"2023-04-01T00:00:00Z","dateModified":"2023-04-01T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://alukach.com/posts/notes-on-cookies/"},"publisher":{"@type":"Organization","name":"anthony lukach","logo":{"@type":"ImageObject","url":"https://alukach.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://alukach.com/ accesskey=h title="anthony lukach (Alt + H)">anthony lukach</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://alukach.com/categories/posts title=Posts><span>Posts</span></a></li><li><a href=https://alukach.com/categories/snippets title=Snippets><span>Snippets</span></a></li><li><a href=https://alukach.com/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://alukach.com/resume title=R√©sum√©><span>R√©sum√©</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Everything that I know about Cookies üç™</h1><div class=post-meta><span title='2023-04-01 00:00:00 +0000 UTC'>April 1, 2023</span>&nbsp;¬∑&nbsp;2 min&nbsp;|&nbsp;<a href=https://github.com/alukach/alukach.github.io/edit/main/content/posts/notes-on-cookies.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#why-cookies aria-label="Why cookies?">Why cookies?</a><ul><li><a href=#making-authenticated-anchor-tags aria-label="Making authenticated anchor tags">Making authenticated anchor tags</a></li><li><a href=#no-need-to-manage-jwts-within-your-application aria-label="No need to manage JWTs within your application">No need to manage JWTs within your application</a></li></ul></li><li><a href=#how-cookies aria-label="How cookies?">How cookies?</a></li><li><a href=#how-to-do-cross-origin-cookies aria-label="How to do cross-origin cookies">How to do cross-origin cookies</a></li></ul></div></details></div><div class=post-content><p>This is everything that I know about using cookies in web applications. Admittedly, I don&rsquo;t know a lot about cookies and should probably not be considered a source of authority on this topic. These are just notes I write while trying to learn about the subject.</p><h2 id=why-cookies>Why cookies?<a hidden class=anchor aria-hidden=true href=#why-cookies>#</a></h2><h3 id=making-authenticated-anchor-tags>Making authenticated anchor tags<a hidden class=anchor aria-hidden=true href=#making-authenticated-anchor-tags>#</a></h3><p>Can&rsquo;t specify headers with <code>&lt;a></code> tags.</p><p>Could supply token as query parameter, but that&rsquo;s a security concern due to potential of token being cached with URL.</p><h3 id=no-need-to-manage-jwts-within-your-application>No need to manage JWTs within your application<a hidden class=anchor aria-hidden=true href=#no-need-to-manage-jwts-within-your-application>#</a></h3><p>Things that are annoying about JWTs when building frontend applications:</p><ul><li>You need to choose where to store the JWTs</li><li>You need to supply the JWT to any code making API requests</li></ul><h2 id=how-cookies>How cookies?<a hidden class=anchor aria-hidden=true href=#how-cookies>#</a></h2><p>Cookies are typically set by backend code after a user successfully logs in. They are typically signed to verify their authenticity. Often, they simply point to an identifier that tracks a user&rsquo;s &ldquo;session&rdquo; within some stateful service (ie database).</p><h2 id=how-to-do-cross-origin-cookies>How to do cross-origin cookies<a hidden class=anchor aria-hidden=true href=#how-to-do-cross-origin-cookies>#</a></h2><ol><li>Backend must set the <code>access-control-allow-credentials</code> header to instruct browsers that it‚Äôs okay to pass credentials when making requests (<a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Credentials>docs</a>).</li><li>Backend must specify the <code>access-control-allow-origin</code> header to instruct browsers which origins are allowed to access the API. Note that you can‚Äôt use * when passing credentials between origins (<a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS/Errors/CORSNotSupportingCredentials>docs</a>).</li><li>Backend will need to specify that our cookies have <code>samesite=none</code> if attempting to send cookie to other sites. Note that <code>Same-Site</code> is not the same as <code>Same-Origin</code>, a cookie set with <code>samesite=strict</code> will still be passed between hosts at different subdomains or ports of a domain (<a href=https://web.dev/same-site-same-origin/>docs</a>). Also note that <code>Secure</code> must also be set when <code>samesite=none</code> (<a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie/SameSite>docs</a>).</li><li>Backend must skip auth checks on preflight requests, as browsers don‚Äôt send cookies on <code>OPTIONS</code> requests (<a href=https://www.w3.org/TR/2020/SPSD-cors-20200602/#cross-origin-request-with-preflight-0>docs</a>)</li><li>Frontend needs to provide credentials with requests.<div class=highlight><div style=color:#4d4d4d;background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#4d4d4d;background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#4d4d4d;background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#2c5dcd;font-weight:700>await</span> fetch(url, { credentials<span style=color:#2c5dcd>:</span> <span style=color:#2c5dcd;font-weight:700>true</span> });
</span></span></code></pre></td></tr></table></div></div></li></ol></div><footer class=post-footer><ul class=post-tags><li><a href=https://alukach.com/tags/cookies/>cookies</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://alukach.com/>anthony lukach</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>